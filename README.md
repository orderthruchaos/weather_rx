# README

This README would normally document whatever steps are necessary to get the
application up and running.

Things you may want to cover:

* Ruby version

* System dependencies

* Configuration

* Database creation

* Database initialization

* How to run the test suite

* Services (job queues, cache servers, search engines, etc.)

* Deployment instructions

* ...

## External APIs

### National Weather Service

Documentation:  https://www.weather.gov/documentation/services-web-api

OpenAPI Specification (JSON-DL):  https://api.weather.gov/openapi.json

Necessary endpoints:

  - `https://api.weather.gov/points/{lat},{lon}`
    - `grid_x = response["properties"]["gridX"]`
    - `grid_y = response["properties"]["gridY"]`
  - `https://api.weather.gov/gridpoints/LWX/{gridX},{gridY}/forecast`
  - `https://api.weather.gov/gridpoints/LWX/{gridX},{gridY}/forecast/hourly`

Authentication is done via User-Agent, with should have the following format:

```
User-Agent: (myweatherapp.com, contact@myweatherapp.com)
```

Results should be GeoJSON:

```
Accept: application/geo+json
```

### US Census Geocodeing Service

The US Census Geocoding Services API will be used to get the latitude and
longitude of an address.

Documentation:  https://geocoding.geo.census.gov/geocoder/Geocoding_Services_API.html

Example API call:  https://geocoding.geo.census.gov/geocoder/locations/address?street=4600+Silver+Hill+Rd&city=Washington&state=DC&benchmark=4&format=json

Note that `benchmark=4` means the current benchmark.  The cleaned up JSON
result is in `test/data/address_example.json`

### External Data Files

External data files are located in `db/data`.

[USPS zip code files](https://postalpro.usps.com/address-quality/ais-viewer):

  - [`db/data/AISUREPT_2.TXT`](https://postalpro.usps.com/storages/2025-04/AISUREPT_2.TXT)
  - [`db/data/AREA_DIST_ZIP_2.TXT`](https://postalpro.usps.com/storages/2025-04/AREA_DIST_ZIP_2.TXT)

The USA states and territories CSV file was generated by ChatGPT:

  - `db/data/us_states_and_territories.csv`
